initial matrix
W=matrix([[ 0.,  3.,  8., inf, -4.],
        [inf,  0., inf,  1.,  7.],
        [inf,  4.,  0., inf, inf],
        [ 2., inf, -5.,  0., inf],
        [inf, inf, inf,  6.,  0.]])
starting P
P=array([[-1,  1,  1, -1,  1],
       [-1, -1, -1,  2,  2],
       [-1,  3, -1, -1, -1],
       [ 4, -1,  4, -1, -1],
       [-1, -1, -1,  5, -1]], dtype=int32)
for k=1
W=array([[ 0.,  3.,  8., inf, -4.],
       [inf,  0., inf,  1.,  7.],
       [inf,  4.,  0., inf, inf],
       [ 2.,  5., -5.,  0., -2.],
       [inf, inf, inf,  6.,  0.]])
P=array([[-1,  1,  1, -1,  1],
       [-1, -1, -1,  2,  2],
       [-1,  3, -1, -1, -1],
       [ 4,  1,  4, -1,  1],
       [-1, -1, -1,  5, -1]], dtype=int32)
for k=2
W=array([[ 0.,  3.,  8.,  4., -4.],
       [inf,  0., inf,  1.,  7.],
       [inf,  4.,  0.,  5., 11.],
       [ 2.,  5., -5.,  0., -2.],
       [inf, inf, inf,  6.,  0.]])
P=array([[-1,  1,  1,  2,  1],
       [-1, -1, -1,  2,  2],
       [-1,  3, -1,  2,  2],
       [ 4,  1,  4, -1,  1],
       [-1, -1, -1,  5, -1]], dtype=int32)
for k=3
W=array([[ 0.,  3.,  8.,  4., -4.],
       [inf,  0., inf,  1.,  7.],
       [inf,  4.,  0.,  5., 11.],
       [ 2., -1., -5.,  0., -2.],
       [inf, inf, inf,  6.,  0.]])
P=array([[-1,  1,  1,  2,  1],
       [-1, -1, -1,  2,  2],
       [-1,  3, -1,  2,  2],
       [ 4,  3,  4, -1,  1],
       [-1, -1, -1,  5, -1]], dtype=int32)
for k=4
W=array([[ 0.,  3., -1.,  4., -4.],
       [ 3.,  0., -4.,  1., -1.],
       [ 7.,  4.,  0.,  5.,  3.],
       [ 2., -1., -5.,  0., -2.],
       [ 8.,  5.,  1.,  6.,  0.]])
P=array([[-1,  1,  4,  2,  1],
       [ 4, -1,  4,  2,  1],
       [ 4,  3, -1,  2,  1],
       [ 4,  3,  4, -1,  1],
       [ 4,  3,  4,  5, -1]], dtype=int32)
for k=5
W=array([[ 0.,  1., -3.,  2., -4.],
       [ 3.,  0., -4.,  1., -1.],
       [ 7.,  4.,  0.,  5.,  3.],
       [ 2., -1., -5.,  0., -2.],
       [ 8.,  5.,  1.,  6.,  0.]])
P=array([[-1,  3,  4,  5,  1],
       [ 4, -1,  4,  2,  1],
       [ 4,  3, -1,  2,  1],
       [ 4,  3,  4, -1,  1],
       [ 4,  3,  4,  5, -1]], dtype=int32)
resulting matrices
W=array([[ 0.,  1., -3.,  2., -4.],
       [ 3.,  0., -4.,  1., -1.],
       [ 7.,  4.,  0.,  5.,  3.],
       [ 2., -1., -5.,  0., -2.],
       [ 8.,  5.,  1.,  6.,  0.]])
P=array([[-1,  3,  4,  5,  1],
       [ 4, -1,  4,  2,  1],
       [ 4,  3, -1,  2,  1],
       [ 4,  3,  4, -1,  1],
       [ 4,  3,  4,  5, -1]], dtype=int32)
